<!DOCTYPE html>
<html>
  <head>
    <title>JIRO REVIEW</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body>
    <header class="site-header">
      <div class="logo">
        <%= link_to root_path do %>
          <%= image_tag "logo.png", alt: "JIRO REVIEW", class: "logo-image" %>
        <% end %>
      </div>
      <p class="header-title">全国のラーメン二郎を、口コミで探そう。</p>
      <div class="header-right">
        <div class="dropdown">
          <button class="dropdown-trigger" type="button">メニュー ▼</button>

          <div class="dropdown-menu">
            <% if logged_in? %>
              <%= link_to "アカウント情報", account_path, class: "dropdown-item" %>
            <% end %>
            <%= link_to "店舗一覧", shops_path, class: "dropdown-item" %>
            <%= link_to "新規店舗登録", new_shop_path, class: "dropdown-item" %>
            <%= link_to "写真一覧", photos_shops_path, class: "dropdown-item" %>
          </div>
        </div>

        <% unless logged_in? %>
          <nav class="header-nav">
            <%= link_to "ログイン", login_path, class: "btn" %>
            <%= link_to "新規登録", signup_path, class: "btn" %>
          </nav>
        <% end %>

        <% if logged_in? %>
          <%= link_to "ログアウト", logout_path, data: { turbo_method: :delete }, class: "btn" %>
        <% end %>
      </div>
    </header>

    <main class="container">
      <%= yield %>
    </main>
    <script>
  // callback が先に呼ばれても落ちない保険
  window.initMap = window.initMap || function () {};
</script>

<script
  async
  defer
  data-turbo-track="reload"
  src="https://maps.googleapis.com/maps/api/js?key=...&callback=initMap&libraries=marker&loading=async">
</script>
  </body>
</html>
